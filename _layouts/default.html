<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>{{ page.title }} - {{ site.title }}</title>

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" href="{{ site.baseurl | default: '/' }}favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="{{ site.baseurl | default: '/' }}assets/style.css">

  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ page.title | default: site.title }}">
  <meta property="og:url" content="{{ page.url | absolute_url }}">

  {% if page.image %}
    <meta property="og:image" content="{{ page.image | absolute_url }}">
  {% else %}
    <meta property="og:image" content="{{ site.social_image | absolute_url }}">
  {% endif %}
</head>
<body>

  <header class="header">
    <div class="header-content">
      <button id="sidebarToggle" class="sidebar-toggle" aria-expanded="false" aria-controls="siteSidebar" aria-label="Open menu">â˜°</button>
      <div>
        <h1 class="site-title">{{ site.title }}</h1>
        <p class="site-tagline">{{ site.description }}</p>
      </div>
    </div>
  </header>

  <div class="container container--cols">
    <aside id="siteSidebar" class="sidebar" role="complementary" aria-hidden="true">
      <div class="sidebar-inner">
        {% include sidebar.html %}
      </div>
    </aside>

    <main class="content" role="main">
      {{ content }}
    </main>
  </div>

  <div class="footer-wrapper">
    <footer class="footer">
      <div class="footer-left">
        <p>Powered by <strong>{{ site.title }}</strong></p>
      </div>
      <div class="footer-right">
        {% include footer_nav.html %}
      </div>
    </footer>
  </div>

  <script>
  (function () {
    var toggle = document.getElementById('sidebarToggle');
    var sidebar = document.getElementById('siteSidebar');

    function setAria(open) {
      if (toggle) toggle.setAttribute('aria-expanded', open);
      if (sidebar) sidebar.setAttribute('aria-hidden', !open);
    }

    if (!toggle || !sidebar) return;

    toggle.addEventListener('click', function (e) {
      e.stopPropagation();
      var isOpen = toggle.getAttribute('aria-expanded') === 'true';
      setAria(!isOpen);
      document.body.classList.toggle('sidebar-open', !isOpen);
    });

    document.addEventListener('click', function (e) {
      if (!document.body.classList.contains('sidebar-open')) return;
      if (window.innerWidth > 900) return;
      if (!sidebar.contains(e.target) && e.target !== toggle) {
        setAria(false);
        document.body.classList.remove('sidebar-open');
      }
    });

    function syncState() {
      if (window.innerWidth > 900) {
        setAria(true);
        document.body.classList.remove('sidebar-open');
      } else {
        setAria(false);
        document.body.classList.remove('sidebar-open');
      }
    }

    window.addEventListener('resize', syncState);
    document.addEventListener('DOMContentLoaded', syncState);
    syncState();
  })();
  </script>

</body>
</html>
